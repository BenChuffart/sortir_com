{% extends 'base.html.twig' %}

{% block title %}Hello to your new trip !{% endblock %}

{% block body %}
    <h1> All the trip ! </h1>

    <div id="info">
        <h3> Date : {{ "now"|date('d/m/Y')}}</h3>
        <h3> User : {{ app.user.firstname }}</h3>
    </div>

    <div id ="filters" class="container">
        <h4> Filter the trips :</h4>
            <div class="row">
                {% include 'inc/filters.html.twig' with {form: filterForm } only %}
            </div>
    </div>

<div id = "allTrip">
    <table>
        <thead>
            <tr>
                <td>Name Trip</td>
                <td>Start dateTime</td>
                <td>Deadline</td>
                <td>Max Registration</td>
                <td>Status</td>
                <td>Creator</td>
                <td>Action </td>
            </tr>
        </thead>
        <tbody>
        {% for trip in trips %}
            <tr>
                <td><a href="{{ path('trips_details', {'id': trip.id}) }}">{{ trip.name }}</a></td>
                <td>{{ trip.startDateTime | date("d/m/Y") }}</td>
                <td>{{ trip.deadline |date("d/m/Y") }}</td>
                <td>{{ trip.maxRegistration }}</td>
                <td>{{ trip.status }}</td>
                <td><a href="{{ path('users_profile', {'id': trip.creator.id }) }}">{{ trip.creator.pseudo }}</a></td>
            
                <td>
                {% if is_granted("POST_EDIT",trip)%}
                    <a href="{{ path("trips_edit",{ id : trip.id })}} ">Modifier</a>
                {% elseif is_granted("POST_VIEW",trip)%}
                    <a href="{{ path("trips_details",{ id : trip.id }) }} ">Afficher</a>
                {% elseif is_granted("POST_DELETE",trip)%}
                    <a href="{{path(" trips_deleteTrip ",{ id : trip.id }) }} ">Supprimer</a>
                {% elseif is_granted("POST_EDIT",trip)%}
                    <a href=" {{ path("",{ id : trip.id }) }}">S'inscrire</a>
                {% elseif is_granted("POST_EDIT",trip)%}
                    <a href=" {{ path("",{ id : trip.id }) }}">Se DÃ©sinster</a>
                {% endif %}
                </td>
            </tr>      
        {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
